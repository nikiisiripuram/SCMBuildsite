@{
    ViewData["Title"] = "DMCR Request";
}

<!-- Add Bootstrap CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" />
<link rel="stylesheet" href="~/css/site.css" />

<!-- Custom Styles -->
<style>
    .navbar {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        z-index: 1000;
    }

    /* Full-screen container */
    .full-screen-container {
        width: 100vw;
        height: 100vh;
        display: none; /* Hide by default */
        justify-content: center;
        align-items: center;
        position: fixed;
        top: 0;
        left: 0;
        background-color: transparent;
    }

    /* Container for iframe and back button */
    .iframe-container {
        position: relative;
        width: 80vw;
        height: 80vh;
        display: flex;
        justify-content: center;
        align-items: center;
        background-color: white;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
        border-radius: 10px;
    }



    /* Full-screen iframe */
    iframe {
        width: 100%;
        height: 100%;
        border: none;
        border-radius: 10px;
    }
</style>

<!-- Full-screen container -->
<div class="full-screen-container" id="dmcrFullScreenContainer">
    <div class="iframe-container">
        
        <iframe src="@ViewBag.RedirectUrl" allowfullscreen></iframe>
    </div>


</div>

<!-- Add Bootstrap JS and dependencies -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<script>
    function closeCard() {
        const containerElement = document.getElementById('dmcrFullScreenContainer');
        if (containerElement) {
            containerElement.style.display = 'none';
        }
    }

    function authenticateCard() {
        // Replace this with actual authentication logic
        const isAuthenticated = true; // Example: replace this with real authentication check

        if (isAuthenticated) {
            document.getElementById('dmcrFullScreenContainer').style.display = 'flex';
        } else {
            // Optionally, display a message or redirect to a login page
            alert('Authentication failed. Redirecting to login...');
            window.location.href = '@Url.Action("Login", "Account")';
        }
    }

    // Call the authentication function when the page loads
    window.onload = authenticateCard;
</script>
